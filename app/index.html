<!DOCTYPE html>
<!-- build:[ng-app]:e2e sn.infiniteScroll.e2e -->
<!--[if lt IE 8]>      <html lang="en" ng-app="sn.infiniteScroll.demo" ng-strict-di class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html lang="en" ng-app="sn.infiniteScroll.demo" ng-strict-di class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en" ng-app="sn.infiniteScroll.e2e" ng-strict-di class="no-js"> <!--<![endif]-->
<!-- /build -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="fragment" content="!">
    <title>snInfiniteScroll</title>

    <!-- build:template
    <base href="<%= url %>">
    /build -->
    <!-- build:remove -->
    <base href="/app/">
    <!-- /build -->

    <!-- build:css angular-sn-infinite-scroll.min.css -->
    <link rel="stylesheet" href="css/all.css">
    <!-- /build -->

    <link rel="apple-touch-icon" sizes="57x57" href="img/favicons/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="img/favicons/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="img/favicons/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="img/favicons/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="img/favicons/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="img/favicons/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="img/favicons/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="img/favicons/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="img/favicons/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="img/favicons/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="img/favicons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/favicons/favicon-16x16.png">
    <link rel="manifest" href="img/favicons/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="img/favicons/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <style>
        .infinite-scroll {
            padding: 20px;
        }
        .user {
            height: 150px;
            border-bottom: 1px solid black;
        }
    </style>

</head>
<body ng-controller="DemoCtrl">

    <div class="infinite-scroll" sn-infinite-scroll="loadMore()" data-disabled="page.loading || page.total <= page.pages">
        <h2>Infinite list of users</h2>
        <div class="user" ng-repeat="user in users">
            <p>{{ user.name }}</p>
        </div>
    </div>


    <!--[if lt IE 8]>
        <p>Your browser is <strong>ancient</strong> and will not work with this site. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->

    <noscript>
        <p>JavaScript is either disabled or not supported by your browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or enable JavaScript to improve your experience.</p>
    </noscript>

    <script>
        document.documentElement.className = document.documentElement.className.replace(/(^|\s)no-js(\s|$)/, "$1$2");
    </script>

    <!--[if gte IE 8]><!-->

    <script src="components/angular/angular.js"></script>

    <!-- build:js angular-sn-infinite-scroll.min.js -->
    <script src="js/config/config.js"></script>
    <script src="js/snInfiniteScroll.js"></script>
    <!-- /build -->

    <script>
        /**
         * @module   sn.infiniteScroll.demo
         * @author   SOON_
         */
        angular.module("sn.infiniteScroll.demo", ["sn.infiniteScroll"])
            .controller("DemoCtrl", [
                "$scope",
                "$http",
                function ($scope, $http) {

                    $scope.users = [];

                    $http.get("/users")
                        .then(function (response) {
                            $scope.users = response.data.items;
                            $scope.page.total = response.data._pagination.total;
                        });

                    $scope.page = {
                        loading: false,
                        pages: 1
                    };

                    $scope.loadMore = function loadMore () {

                        $scope.page.loading = true;
                        $scope.page.pages++;

                        $http.get("/users")
                            .then(function(response){
                                $scope.users = $scope.users.concat(response.data.items);

                                $scope.page.loading = false;
                                $scope.page.total = response.data._pagination.total || 0;
                            });
                    };

                }
            ]);
    </script>
    <!--<![endif]-->

    <!-- build:js:e2e inline components/angular-mocks/angular-mocks.js --><!-- /build -->
    <!-- build:js:e2e inline ../tests/e2e/app.e2e.js --><!-- /build -->

    <!-- build:remove -->
    <script src="components/angular-mocks/angular-mocks.js"></script>
    <script src="../tests/e2e/app.e2e.js"></script>
    <!-- /build -->

</body>
</html>
